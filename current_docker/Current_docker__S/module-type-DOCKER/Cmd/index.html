<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cmd (current_docker.Current_docker__S.DOCKER.Cmd)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">current_docker</a> &#x00BB; <a href="../../index.html">Current_docker__S</a> &#x00BB; <a href="../index.html">DOCKER</a> &#x00BB; Cmd</nav><h1>Module <code>DOCKER.Cmd</code></h1></header><aside><p>Building Docker commands. This is useful for creating custom pipeline stages.</p></aside><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = Lwt_process.command</code></dt></dl><dl><dt class="spec value" id="val-docker"><a href="#val-docker" class="anchor"></a><code><span class="keyword">val</span> docker : <span>string list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>docker args</code> is a command to run docker, with the &quot;--context&quot; argument added (if necessary). e.g. <code>docker [&quot;run&quot;; image]</code></p></dd></dl><dl><dt class="spec value" id="val-with_container"><a href="#val-with_container" class="anchor"></a><code><span class="keyword">val</span> with_container : <span>kill_on_cancel:bool</span> <span>&#45;&gt;</span> <span>job:<a href="../../../../current/Current/Job/index.html#type-t">Current.Job.t</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>(string <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../../../../current/Current/index.html#type-or_error">Current.or_error</a></span> Lwt.t</span>)</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> <a href="../../../../current/Current/index.html#type-or_error">Current.or_error</a></span> Lwt.t</span></code></dt><dd><p><code>with_container ~kill_on_cancel ~job t fn</code> runs <code>t</code> to create a new container (the output is the container ID), then calls <code>fn id</code>. When <code>fn</code> returns, it removes the container (killing it first if necessary). If <code>fn</code> raises an exception, it catches it and turns it into an error return.</p><dl><dt>parameter kill_on_cancel</dt><dd><p>&quot;docker kill&quot; the container if the the job is cancelled.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : <span><a href="index.html#type-t">t</a> Fmt.t</span></code></dt></dl></div></body></html>